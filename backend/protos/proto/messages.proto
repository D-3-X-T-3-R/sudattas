
syntax = "proto3";

package grpc_services;

// Cart

message CreateCartItemRequest {
    optional int64 user_id = 1;
    int64 product_id = 2;
    int64 quantity = 3;
    optional string session_id = 4;  // Guest cart when user_id not set
}

message GetCartItemsRequest {
    optional int64 user_id = 1;
    optional string session_id = 2;  // Guest cart; use when user_id not set
}

message UpdateCartItemRequest {
    int64 cart_id = 1;
    optional int64 user_id = 2;
    int64 product_id = 3;
    int64 quantity = 4;
    optional string session_id = 5;
}

message DeleteCartItemRequest {
    optional int64 user_id = 1;
    optional int64 cart_id = 2;
    optional string session_id = 3;
}

message CartItemResponse {
    int64 cart_id = 1;
    int64 user_id = 2;
    int64 product_id = 3;
    int64 quantity = 4;
}

message CartItemsResponse {
    repeated CartItemResponse items = 1;
}

// Country

message CreateCountryRequest {
    string country_name = 1;
}

message DeleteCountryRequest {
    int64 country_id = 1;
}

message SearchCountryRequest {
    optional int64 country_id = 1;
    optional string country_name = 2;
}

message CountryResponse {
    int64 country_id = 1;
    string country_name = 2;
}

message CountriesResponse {
    repeated CountryResponse items = 1;
}

// State

message CreateStateRequest {
    string state_name = 1;
}

message DeleteStateRequest {
    int64 state_id = 1;
}

message SearchStateRequest {
    optional int64 state_id = 1;
    optional string state_name = 2;
}

message StateResponse {
    int64 state_id = 1;
    string state_name = 2;
}

message StatesResponse {
    repeated StateResponse items = 1;
}

// City

message CreateCityRequest {
    string city_name = 1;
}

message DeleteCityRequest {
    int64 city_id = 1;
}
    
message SearchCityRequest {
    optional int64 city_id = 1;
    optional string city_name = 2;
}

message CityResponse {
    int64 city_id = 1;
    string city_name = 2;
}

message CitiesResponse {
    repeated CityResponse items = 1;
}

// StateCityMapping

message CreateStateCityMappingRequest {
    int64 state_id = 1;
    int64 city_id = 2;
}

message UpdateStateCityMappingRequest {
    int64 id = 1;
    int64 state_id = 2;
    int64 city_id = 3;
}

message DeleteStateCityMappingRequest {
    int64 id = 1;
}

message SearchStateCityMappingRequest {
    optional int64 id = 1;
    optional int64 state_id = 2;
    optional int64 city_id = 3;
}

message StateCityMappingResponse {
    int64 id = 1;
    int64 state_id = 2;
    int64 city_id = 3;
}

message StateCityMappingsResponse {
    repeated StateCityMappingResponse items = 1;
}

// CountryStateMapping

message CreateCountryStateMappingRequest {
    int64 country_id = 1;
    int64 state_id = 2;
}

message UpdateCountryStateMappingRequest {
    int64 id = 1;
    optional int64 country_id = 2;
    optional int64 state_id = 3;
}

message DeleteCountryStateMappingRequest {
    int64 id = 1;
}

message SearchCountryStateMappingRequest {
    optional int64 id = 1;
    optional int64 country_id = 2;
    optional int64 state_id = 3;
}

message CountryStateMappingResponse {
    int64 id = 1;
    int64 country_id = 2;
    int64 state_id = 3;
}

message CountryStateMappingsResponse {
    repeated CountryStateMappingResponse items = 1;
}

// ShippingAddress

message CreateShippingAddressRequest {
    int64 country_id = 1;
    int64 state_id = 2;
    int64 city_id = 3;
    string road = 4;
    string apartment_no_or_name = 5;
}

message UpdateShippingAddressRequest {
    int64 shipping_address_id = 1;
    int64 country_id = 2;
    int64 state_id = 3;
    int64 city_id = 4;
    string road = 5;
    string apartment_no_or_name = 6;
}

message DeleteShippingAddressRequest {
    int64 shipping_address_id = 1;
}

message GetShippingAddressRequest { }

message ShippingAddressResponse {
    int64 shipping_address_id = 1;
    int64 country_id = 2;
    int64 state_id = 3;
    int64 city_id = 4;
    string road = 5;
    string apartment_no_or_name = 6;
}

message ShippingAddressesResponse {
    repeated ShippingAddressResponse items = 1;
}

// Products

message CreateProductRequest {
    string name = 1;
    optional string description = 2;
    double price = 3;
    optional int64 stock_quantity = 4;
    optional int64 category_id = 5;
}

message SearchProductRequest {
    optional string name = 1;
    optional string description = 2;
    optional double starting_price = 3;
    optional int64 stock_quantity = 4;
    optional int64 category_id = 5;
    optional double ending_price = 6;
    optional int64 product_id = 7;
}

message GetProductsByIdRequest {
    repeated int64 product_ids = 1;
}

message UpdateProductRequest {
    string name = 1;
    optional string description = 2;
    double price = 3;
    optional int64 stock_quantity = 4;
    optional int64 category_id = 5;
    int64 product_id =6;
}

message DeleteProductRequest {
    int64 product_id = 1;
}

message ProductResponse {
    string name = 1;
    optional string description = 2;
    double price = 3;
    optional int64 stock_quantity = 4;
    optional int64 category_id = 5;
    int64 product_id = 6;
}

message ProductsResponse {
    repeated ProductResponse items = 1;
}

// Users

message CreateUserRequest {
    string username = 1;
    string password = 2;
    string email = 3;
    optional string full_name = 4;
    optional string address = 5;
    optional string phone = 6;
}

message SearchUserRequest {
    int64 user_id = 1;
}

message UpdateUserRequest {
    int64 user_id = 1;
    optional string username = 2;
    optional string password = 3;
    optional string email = 4;
    optional string full_name = 5;
    optional string address = 6;
    optional string phone = 7;
}

message DeleteUserRequest {
    int64 user_id = 1;
}

message UserResponse {
    int64 user_id = 1;
    string username = 2;
    string email = 3;
    optional string full_name = 4;
    optional string address = 5;
    optional string phone = 6;
    string create_date = 7;
    optional string session_id = 8;  // Set on create_user when Redis session is created
}

message UsersResponse {
    repeated UserResponse items = 1;
}

// Categories

message CreateCategoryRequest {
    string name = 1;
}

message SearchCategoryRequest {
    optional int64 category_id = 1;
    optional string name = 2;
}

message UpdateCategoryRequest {
    int64 category_id = 1;
    string name = 2;
}

message DeleteCategoryRequest {
    int64 category_id = 1;
}

message CategoryResponse {
    int64 category_id = 1;
    string name = 2;
}

message CategoriesResponse {
    repeated CategoryResponse items = 1;
}

// Orders

message PlaceOrderRequest{
    int64 shipping_address_id = 1;
    int64 user_id = 2;
    optional string coupon_code = 3;
}
message CreateOrderRequest {
    int64 user_id = 1;
    int64 shipping_address_id = 2;
    int64 status_id = 3;
    double total_amount = 4;
}

message SearchOrderRequest {
    optional int64 order_id = 1;
    int64 user_id = 2;
    optional int64 order_date_start = 3;
    optional int64 order_date_end = 4;
    optional int64 status_id = 5;
}

message UpdateOrderRequest {
    int64 order_id = 1;
    int64 user_id = 2;
    int64 shipping_address_id = 3;
    double total_amount = 4;
    int64 status_id = 5;
}

message DeleteOrderRequest {
    int64 order_id = 1;
}

message OrderResponse {
    int64 order_id = 1;
    int64 user_id = 2;
    string order_date = 3;
    int64 shipping_address_id = 4;
    double total_amount = 5;
    int64 status_id = 6;
}

message OrdersResponse {
    repeated OrderResponse items = 1;
}

// OrderDetails

message CreateOrderDetailRequest {
    int64 order_id = 1;
    int64 product_id = 2;
    int64 quantity = 3;
    double price = 4;
}

message CreateOrderDetailsRequest {
    repeated CreateOrderDetailRequest order_details = 1;
}

message SearchOrderDetailRequest {
    optional int64 order_detail_id = 1;
    optional int64 order_id = 2;
    optional int64 product_id = 3;
    optional int64 quantity = 4;
    optional double price_start = 5;
    optional double price_end = 6;
}

message UpdateOrderDetailRequest {
    int64 order_detail_id = 1;
    int64 order_id = 2;
    int64 product_id = 3;
    int64 quantity = 4;
    double price = 5;
}

message OrderDetailResponse {
    int64 order_detail_id = 1;
    int64 order_id = 2;
    int64 product_id = 3;
    int64 quantity = 4;
    double price = 5;
}

message OrderDetailsResponse {
    repeated OrderDetailResponse items = 1;
}

// Reviews

message CreateReviewRequest {
    int64 product_id = 1;
    int64 user_id = 2;
    int64 rating = 3;
    string comment = 4;
}

message SearchReviewRequest {
    int64 review_id = 1;
}

message UpdateReviewRequest {
    int64 review_id = 1;
    optional int64 product_id = 2;
    optional int64 user_id = 3;
    optional int64 rating = 4;
    optional string comment = 5;
}

message DeleteReviewRequest {
    int64 review_id = 1;
}

message ReviewResponse {
    int64 review_id = 1;
    int64 product_id = 2;
    int64 user_id = 3;
    int64 rating = 4;
    string comment = 5;
}

message ReviewsResponse {
    repeated ReviewResponse items = 1;
}

// ProductImages

message SearchProductImageRequest {
    optional int64 image_id = 1;
    optional int64 product_id = 2;
    optional string alt_text = 3;
}

message UpdateProductImageRequest {
    int64 image_id = 1;
    int64 product_id = 2;
    string image_base64 = 3;
    optional string alt_text = 4;
}

message DeleteProductImageRequest {
    int64 image_id = 1;
}

message ProductImageResponse {
    int64 image_id = 1;
    int64 product_id = 2;
    string image_base64 = 3;    // legacy; empty for R2-backed images
    optional string alt_text = 4;
    optional string url = 5;    // full CDN URL
    optional string cdn_path = 6;
    optional string thumbnail_url = 7;
}

message ProductImagesResponse {
    repeated ProductImageResponse items = 1;
}

message GetPresignedUploadUrlRequest {
    int64 product_id = 1;
    string filename = 2;
    string content_type = 3;
}

message PresignedUploadUrlResponse {
    string upload_url = 1;  // PUT this URL directly from the client
    string key = 2;         // R2 object key â€” pass back to ConfirmImageUpload
    string cdn_url = 3;     // final public URL after upload
}

message ConfirmImageUploadRequest {
    int64 product_id = 1;
    string key = 2;
    optional string alt_text = 3;
    optional int32 display_order = 4;
}

// Suppliers

message CreateSupplierRequest {
    string name = 1;
    string contact_info = 2;
    string address = 3;
}

message SearchSupplierRequest {
    int64 supplier_id = 1;
}

message UpdateSupplierRequest {
    int64 supplier_id = 1;
    optional string name = 2;
    optional string contact_info = 3;
    optional string address = 4;
}

message DeleteSupplierRequest {
    int64 supplier_id = 1;
}

message SupplierResponse {
    int64 supplier_id = 1;
    string name = 2;
    string contact_info = 3;
    string address = 4;
}

message SuppliersResponse {
    repeated SupplierResponse items = 1;
}

// Inventory

message CreateInventoryItemRequest {
    int64 product_id = 1;
    int64 quantity_available = 2;
    int64 reorder_level = 3;
    int64 supplier_id = 4;
}

message SearchInventoryItemRequest {
    int64 inventory_id = 1;
    optional int64 product_id = 2;
}

message UpdateInventoryItemRequest {
    int64 inventory_id = 1;
    optional int64 product_id = 2;
    optional int64 quantity_available = 3;
    optional int64 reorder_level = 4;
    optional int64 supplier_id = 5;
}

message DeleteInventoryItemRequest {
    int64 inventory_id = 1;
}

message InventoryItemResponse {
    int64 inventory_id = 1;
    int64 product_id = 2;
    int64 quantity_available = 3;
    int64 reorder_level = 4;
    int64 supplier_id = 5;
}

message InventoryItemsResponse {
    repeated InventoryItemResponse items = 1;
}

// Wishlist

message AddWishlistItemRequest {
    int64 user_id = 1;
    int64 product_id = 2;
}

message SearchWishlistItemRequest {
    optional int64 wishlist_id = 1;
    int64 user_id = 2;
    optional int64 product_id = 3;

}

message DeleteWishlistItemRequest {
    int64 wishlist_id = 1;
    int64 user_id = 2;
}

message WishlistItemResponse {
    int64 wishlist_id = 1;
    int64 user_id = 2;
    int64 product_id = 3;
    string date_added = 4;
}

message WishlistItemsResponse {
    repeated WishlistItemResponse items = 1;
}

// ProductAttributes

message CreateProductAttributeRequest {
    int64 product_id = 1;
    string attribute_name = 2;
    string attribute_value = 3;
}

message SearchProductAttributeRequest {
    int64 attribute_id = 1;
}

message UpdateProductAttributeRequest {
    int64 attribute_id = 1;
    optional int64 product_id = 2;
    optional string attribute_name = 3;
    optional string attribute_value = 4;
}

message DeleteProductAttributeRequest {
    int64 attribute_id = 1;
}

message ProductAttributeResponse {
    int64 attribute_id = 1;
    int64 product_id = 2;
    string attribute_name = 3;
    string attribute_value = 4;
}

message ProductAttributesResponse {
    repeated ProductAttributeResponse items = 1;
}

// Discounts

message CreateDiscountRequest {
    int64 product_id = 1;
    double discount_percentage = 2;
    string start_date = 3;
    string end_date = 4;
}

message SearchDiscountRequest {
    int64 discount_id = 1;
}

message UpdateDiscountRequest {
    int64 discount_id = 1;
    optional int64 product_id = 2;
    optional double discount_percentage = 3;
    optional string start_date = 4;
    optional string end_date = 5;
}

message DeleteDiscountRequest {
    int64 discount_id = 1;
}

message DiscountResponse {
    int64 discount_id = 1;
    int64 product_id = 2;
    double discount_percentage = 3;
    string start_date = 4;
    string end_date = 5;
}

message DiscountsResponse {
    repeated DiscountResponse items = 1;
}

// ShippingMethods

message CreateShippingMethodRequest {
    string method_name = 1;
    double cost = 2;
    string estimated_delivery_time = 3;
}

message SearchShippingMethodRequest {
    int64 method_id = 1;
}

message UpdateShippingMethodRequest {
    int64 method_id = 1;
    optional string method_name = 2;
    optional double cost = 3;
    optional string estimated_delivery_time = 4;
}

message DeleteShippingMethodRequest {
    int64 method_id = 1;
}

message ShippingMethodResponse {
    int64 method_id = 1;
    string method_name = 2;
    double cost = 3;
    string estimated_delivery_time = 4;
}

message ShippingMethodsResponse {
    repeated ShippingMethodResponse items = 1;
}

// UserRoles

message CreateUserRoleRequest {
    string role_name = 1;
}

message SearchUserRoleRequest {
    int64 role_id = 1;
}

message UpdateUserRoleRequest {
    int64 role_id = 1;
    string role_name = 2;
}

message DeleteUserRoleRequest {
    int64 role_id = 1;
}

message UserRoleResponse {
    int64 role_id = 1;
    string role_name = 2;
}

message UserRolesResponse {
    repeated UserRoleResponse items = 1;
}

// Transactions

message CreateTransactionRequest {
    int64 user_id = 1;
    double amount = 2;
    string type = 3;
}

message SearchTransactionRequest {
    int64 transaction_id = 1;
}

message UpdateTransactionRequest {
    int64 transaction_id = 1;
    optional int64 user_id = 2;
    optional double amount = 3;
    optional string type = 4;
}

message DeleteTransactionRequest {
    int64 transaction_id = 1;
}

message TransactionResponse {
    int64 transaction_id = 1;
    int64 user_id = 2;
    double amount = 3;
    string transaction_date = 4;
    string type = 5;
}

message TransactionsResponse {
    repeated TransactionResponse items = 1;
}

// NewsletterSubscribers

message CreateNewsletterSubscriberRequest {
    string email = 1;
}

message SearchNewsletterSubscriberRequest {
    int64 subscriber_id = 1;
}

message UpdateNewsletterSubscriberRequest {
    int64 subscriber_id = 1;
    string email = 2;
}

message DeleteNewsletterSubscriberRequest {
    int64 subscriber_id = 1;
}

message NewsletterSubscriberResponse {
    int64 subscriber_id = 1;
    string email = 2;
    string subscription_date = 3;
}

message NewsletterSubscribersResponse {
    repeated NewsletterSubscriberResponse items = 1;
}

// ProductRatings

message CreateProductRatingRequest {
    int64 product_id = 1;
    int64 user_id = 2;
    int64 rating = 3;
}

message SearchProductRatingRequest {
    int64 rating_id = 1;
}

message UpdateProductRatingRequest {
    int64 rating_id = 1;
    optional int64 product_id = 2;
    optional int64 user_id = 3;
    optional int64 rating = 4;
}

message DeleteProductRatingRequest {
    int64 rating_id = 1;
}

message ProductRatingResponse {
    int64 rating_id = 1;
    int64 product_id = 2;
    int64 user_id = 3;
    int64 rating = 4;
}

message ProductRatingsResponse {
    repeated ProductRatingResponse items = 1;
}

// Sizes

message CreateSizeRequest {
    string size_name = 1;
}

message SearchSizeRequest {
    int64 size_id = 1;
}

message UpdateSizeRequest {
    int64 size_id = 1;
    string size_name = 2;
}

message DeleteSizeRequest {
    int64 size_id = 1;
}

message SizeResponse {
    int64 size_id = 1;
    string size_name = 2;
}

message SizesResponse {
    repeated SizeResponse items = 1;
}

// Colors

message CreateColorRequest {
    string color_name = 1;
}

message SearchColorRequest {
    int64 color_id = 1;
}

message UpdateColorRequest {
    int64 color_id = 1;
    string color_name = 2;
}

message DeleteColorRequest {
    int64 color_id = 1;
}

message ColorResponse {
    int64 color_id = 1;
    string color_name = 2;
}

message ColorsResponse {
    repeated ColorResponse items = 1;
}

// ProductCategoryMapping

message CreateProductCategoryMappingRequest {
    int64 product_id = 1;
    int64 category_id = 2;
}

message SearchProductCategoryMappingRequest {
    int64 product_id = 1;
    int64 category_id = 2;
}

message DeleteProductCategoryMappingRequest {
    int64 product_id = 1;
    int64 category_id = 2;
}

message ProductCategoryMappingResponse {
    int64 product_id = 1;
    int64 category_id = 2;
}

message ProductCategoryMappingsResponse {
    repeated ProductCategoryMappingResponse items = 1;
}

// ProductAttributeMapping

message CreateProductAttributeMappingRequest {
    int64 product_id = 1;
    int64 attribute_id = 2;
}

message SearchProductAttributeMappingRequest {
    int64 product_id = 1;
    int64 attribute_id = 2;
}

message DeleteProductAttributeMappingRequest {
    int64 product_id = 1;
    int64 attribute_id = 2;
}

message ProductAttributeMappingResponse {
    int64 product_id = 1;
    int64 attribute_id = 2;
}

message ProductAttributeMappingsResponse {
    repeated ProductAttributeMappingResponse items = 1;
}

// UserRoleMapping

message CreateUserRoleMappingRequest {
    int64 user_id = 1;
    int64 role_id = 2;
}

message SearchUserRoleMappingRequest {
    int64 user_id = 1;
    int64 role_id = 2;
}

message DeleteUserRoleMappingRequest {
    int64 user_id = 1;
    int64 role_id = 2;
}

message UserRoleMappingResponse {
    int64 user_id = 1;
    int64 role_id = 2;
}

message UserRoleMappingsResponse {
    repeated UserRoleMappingResponse items = 1;
}

// ProductSizeMapping

message CreateProductSizeMappingRequest {
    int64 product_id = 1;
    int64 size_id = 2;
}

message SearchProductSizeMappingRequest {
    int64 product_id = 1;
    int64 size_id = 2;
}

message DeleteProductSizeMappingRequest {
    int64 product_id = 1;
    int64 size_id = 2;
}

message ProductSizeMappingResponse {
    int64 product_id = 1;
    int64 size_id = 2;
}

message ProductSizeMappingsResponse {
    repeated ProductSizeMappingResponse items = 1;
}

// ProductColorMapping

message CreateProductColorMappingRequest {
    int64 product_id = 1;
    int64 color_id = 2;
}

message SearchProductColorMappingRequest {
    int64 product_id = 1;
    int64 color_id = 2;
}

message DeleteProductColorMappingRequest {
    int64 product_id = 1;
    int64 color_id = 2;
}

message ProductColorMappingResponse {
    int64 product_id = 1;
    int64 color_id = 2;
}

message ProductColorMappingsResponse {
    repeated ProductColorMappingResponse items = 1;
}

// ProductVariants

message CreateProductVariantRequest {
    int64 product_id = 1;
    optional int64 size_id = 2;
    optional int64 color_id = 3;
    optional double additional_price = 4;
}

message SearchProductVariantRequest {
    int64 variant_id = 1;
}

message UpdateProductVariantRequest {
    int64 variant_id = 1;
    optional int64 product_id = 2;
    optional int64 size_id = 3;
    optional int64 color_id = 4;
    optional double additional_price = 5;
}

message DeleteProductVariantRequest {
    int64 variant_id = 1;
}

message ProductVariantResponse {
    int64 variant_id = 1;
    int64 product_id = 2;
    optional int64 size_id = 3;
    optional int64 color_id = 4;
    optional double additional_price = 5;
}

message ProductVariantsResponse {
    repeated ProductVariantResponse items = 1;
}

// EventLogs

message CreateEventLogRequest {
    string event_type = 1;
    string event_description = 2;
    int64 user_id = 3;
}

message SearchEventLogRequest {
    int64 log_id = 1;
}

message UpdateEventLogRequest {
    int64 log_id = 1;
    optional string event_type = 2;
    optional string event_description = 3;
    optional int64 user_id = 4;
}

message DeleteEventLogRequest {
    int64 log_id = 1;
}

message EventLogResponse {
    int64 log_id = 1;
    string event_type = 2;
    string event_description = 3;
    int64 user_id = 4;
    string event_time = 5;
}

message EventLogsResponse {
    repeated EventLogResponse items = 1;
}

// UserActivity

message CreateUserActivityRequest {
    int64 user_id = 1;
    string activity_type = 2;
    string activity_details = 3;
}

message SearchUserActivityRequest {
    int64 activity_id = 1;
}

message UpdateUserActivityRequest {
    int64 activity_id = 1;
    optional int64 user_id = 2;
    optional string activity_type = 3;
    optional string activity_details = 4;
}

message DeleteUserActivityRequest {
    int64 activity_id = 1;
}

message UserActivityResponse {
    int64 activity_id = 1;
    int64 user_id = 2;
    string activity_type = 3;
    string activity_time = 4;
    string activity_details = 5;
}

message UserActivitiesResponse {
    repeated UserActivityResponse items = 1;
}

// InventoryLog

message CreateInventoryLogRequest {
    int64 product_id = 1;
    int64 change_quantity = 2;
    string reason = 3;
}

message SearchInventoryLogRequest {
    int64 log_id = 1;
}

message UpdateInventoryLogRequest {
    int64 log_id = 1;
    optional int64 product_id = 2;
    optional int64 change_quantity = 3;
    optional string reason = 4;
}

message DeleteInventoryLogRequest {
    int64 log_id = 1;
}

message InventoryLogResponse {
    int64 log_id = 1;
    int64 product_id = 2;
    int64 change_quantity = 3;
    string log_time = 4;
    string reason = 5;
}

message InventoryLogsResponse {
    repeated InventoryLogResponse items = 1;
}

// Promotions

message CreatePromotionRequest {
    string promotion_name = 1;
    string start_date = 2;
    string end_date = 3;
    string details = 4;
}

message SearchPromotionRequest {
    int64 promotion_id = 1;
}

message UpdatePromotionRequest {
    int64 promotion_id = 1;
    optional string promotion_name = 2;
    optional string start_date = 3;
    optional string end_date = 4;
    optional string details = 5;
}

message DeletePromotionRequest {
    int64 promotion_id = 1;
}

message PromotionResponse {
    int64 promotion_id = 1;
    string promotion_name = 2;
    string start_date = 3;
    string end_date = 4;
    string details = 5;
}

message PromotionsResponse {
    repeated PromotionResponse items = 1;
}

// ShippingZones

message CreateShippingZoneRequest {
    string zone_name = 1;
    string description = 2;
}

message SearchShippingZoneRequest {
    int64 zone_id = 1;
}

message UpdateShippingZoneRequest {
    int64 zone_id = 1;
    optional string zone_name = 2;
    optional string description = 3;
}

message DeleteShippingZoneRequest {
    int64 zone_id = 1;
}

message ShippingZoneResponse {
    int64 zone_id = 1;
    string zone_name = 2;
    string description = 3;
}

message ShippingZonesResponse {
    repeated ShippingZoneResponse items = 1;
}

// Coupons

message ValidateCouponRequest {
    string code = 1;
    int64 order_amount_paise = 2;
}

message ApplyCouponRequest {
    string code = 1;
    int64 order_amount_paise = 2;
}

message CouponResponse {
    int64 coupon_id = 1;
    string code = 2;
    string discount_type = 3;   // percentage | fixed_amount
    int32 discount_value = 4;
    int64 discount_amount_paise = 5;
    int64 final_amount_paise = 6;
    bool is_valid = 7;
    string reason = 8;
}

message CouponsResponse {
    repeated CouponResponse items = 1;
}

// Shipments

message CreateShipmentRequest {
    int64 order_id = 1;
    optional string shiprocket_order_id = 2;
    optional string awb_code = 3;
    optional string carrier = 4;
}

message UpdateShipmentRequest {
    int64 shipment_id = 1;
    optional string shiprocket_order_id = 2;
    optional string awb_code = 3;
    optional string carrier = 4;
    optional string status = 5;  // pending | processed | failed
}

message GetShipmentRequest {
    optional int64 shipment_id = 1;
    optional int64 order_id = 2;
}

message ShipmentResponse {
    int64 shipment_id = 1;
    int64 order_id = 2;
    optional string shiprocket_order_id = 3;
    optional string awb_code = 4;
    optional string carrier = 5;
    string status = 6;
    string created_at = 7;
    optional string delivered_at = 8;
}

message ShipmentsResponse {
    repeated ShipmentResponse items = 1;
}

// PaymentIntents

message CreatePaymentIntentRequest {
    int64 order_id = 1;
    int64 user_id = 2;
    int64 amount_paise = 3;
    optional string currency = 4;  // defaults to "INR"
    string razorpay_order_id = 5;  // Razorpay order ID from payment provider
}

message CapturePaymentRequest {
    int64 intent_id = 1;
    string razorpay_payment_id = 2;  // Payment ID returned by Razorpay after payment
}

message GetPaymentIntentRequest {
    optional int64 intent_id = 1;
    optional int64 order_id = 2;
}

message PaymentIntentResponse {
    int64 intent_id = 1;
    string razorpay_order_id = 2;
    optional int64 order_id = 3;
    optional int64 user_id = 4;
    int64 amount_paise = 5;
    optional string currency = 6;
    string status = 7;
    optional string razorpay_payment_id = 8;
    string created_at = 9;
    string expires_at = 10;
}

message PaymentIntentsResponse {
    repeated PaymentIntentResponse items = 1;
}

// PaymentMethods

message CreatePaymentMethodRequest {
    string method_name = 1;
    string details = 2;
}

message SearchPaymentMethodRequest {
    int64 method_id = 1;
}

message UpdatePaymentMethodRequest {
    int64 method_id = 1;
    optional string method_name = 2;
    optional string details = 3;
}

message DeletePaymentMethodRequest {
    int64 method_id = 1;
}

message PaymentMethodResponse {
    int64 method_id = 1;
    string method_name = 2;
    string details = 3;
}

message PaymentMethodsResponse {
    repeated PaymentMethodResponse items = 1;
}

// Webhooks

message IngestWebhookRequest {
    string provider = 1;
    string event_type = 2;
    string webhook_id = 3;      // idempotency key (e.g. provider:payment_id)
    string payload_json = 4;    // raw JSON payload string
    bool signature_verified = 5;
}

message WebhookEventResponse {
    int64 event_id = 1;
    string provider = 2;
    string event_type = 3;
    string webhook_id = 4;
    string status = 5;
    string received_at = 6;
}

message WebhookEventsResponse {
    repeated WebhookEventResponse items = 1;
}

// OrderEvents

message CreateOrderEventRequest {
    int64 order_id = 1;
    string event_type = 2;
    optional string from_status = 3;
    optional string to_status = 4;
    string actor_type = 5;  // customer | admin | system
    optional string message = 6;
}

message GetOrderEventsRequest {
    int64 order_id = 1;
}

message OrderEventResponse {
    int64 event_id = 1;
    int64 order_id = 2;
    string event_type = 3;
    string from_status = 4;
    string to_status = 5;
    string actor_type = 6;
    string message = 7;
    string created_at = 8;
}

message OrderEventsResponse {
    repeated OrderEventResponse items = 1;
}
